<!DOCTYPE html>  <html lang="en">  
<head>  
  <meta charset="UTF-8" />  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />  
  <title>The Mom's Kitchen - Food Preferences</title>  
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">  
  
  <style>  
    
    html, body {
  height: 100%;
  overflow: hidden;   /* üî• scroll band */
    }
    
    body {
  font-family: 'Poppins', sans-serif;
  background: #FFFFF0;
  margin: 0;
  padding: 0;
  color: #333;

  display: flex;
  justify-content: center;
  align-items: center;
}
    
.container {
  max-width: 500px;
  margin: 0 auto;           /* ‚ùå 40px auto hata diya */
  min-height: 100vh;        /* üî• full screen height */
  background: #FFFFF0;
  border-radius: 16px;
  box-shadow: 0 6px 16px rgba(0,0,0,0.08);
  padding: 20px 20px 30px;  /* slightly reduced padding */
  box-sizing: border-box;
}

.logo { text-align: center; margin-bottom: 10px; }  
.logo img { width: 100px; }  

h2 {   
  text-align: center;  
  margin-bottom: 10px;  
  color: #222;  
  font-size: 1.4rem;  
}  

/* Slim Progress Bar */  
.progress-container {  
  width: 100%;  
  height: 3px;  
  background: #f6f6f6;  
  border-radius: 50px;  
  margin: 15px 0 25px;  
  overflow: hidden;  
}  

.progress-bar {  
  height: 100%;  
  width: 0%;  
  background: #000000;  
  border-radius: 50px;  
  transition: width 0.4s ease-in-out;  
}  

.progress-text {  
  text-align: center;  
  font-size: 0.9rem;  
  color: #777;  
  margin-bottom: 10px;  
}  

.question { display: none; }  
.question.active { display: block; }  

label {  
  font-weight: 600;  
  display: block;  
  margin-bottom: 8px;  
  color: #333;  
}  

input[type="text"], input[type="tel"], textarea {  
  width: 90%;  
  padding: 12px 14px;  
  border: 1px solid #ccc;  
  border-radius: 8px;  
  font-size: 1rem;  
  margin-bottom: 18px;  
}  

input:focus, textarea:focus {  
  border-color: #fecd50;  
  outline: none;  
}  

.options {  
  display: flex;  
  flex-direction: column;  
  gap: 10px;  
  margin: 10px 0 25px;  
}  

.options label {  
  display: flex;  
  align-items: center;  
  gap: 10px;  
  padding: 12px 14px;  
  border-radius: 10px;  
  border: 1px solid #ddd;  
  background: #fafafa;  
  cursor: pointer;  
  transition: 0.25s;  
}  

.options label:hover {  
  border-color: #fecd50;  
  background: #fffdf0;  
}  

.options input {  
  accent-color: #fecd50;  
}  

.options input:checked + span {  
  font-weight: 600;  
  color: #c79300;  
}  

.btn-group {  
  display: flex;  
  justify-content: space-between;  
  gap: 25px;  
  margin-top: 45px;  
}  

button {  
  flex: 1;  
  background: #000000;  
  border: none;  
  color: #fff;  
  padding: 13px 0;  
  border-radius: 8px;  
  font-size: 1rem;  
  cursor: pointer;  
  font-weight: 600;  
  transition: 0.3s;  
}  

button:hover:not(:disabled) {  
  background: #e6b800;  
}  

button:disabled {  
  background: #ccc;  
  cursor: not-allowed;  
}  

textarea {  
  resize: none;  
}

/* FIX background color */
body, .container {
background: #FFFFF0;
}

/* FULL SCREEN LOADER */
#loadingOverlay {
position: fixed;
inset: 0;
background: #FECD50;
display: none;
flex-direction: column;
align-items: center;
justify-content: center;
z-index: 9999;
font-weight: 600;
}

#loadingOverlay p {
margin-top: 15px;
font-size: 1rem;
}

/* Spinner */
.loader {
width: 45px;
height: 45px;
border: 5px solid #fff;
border-top: 5px solid #000;
border-radius: 50%;
animation: spin 1s linear infinite;
}

@keyframes spin {
100% { transform: rotate(360deg); }
}
</style>

</head>  
<!-- LOADING OVERLAY -->  
<div id="loadingOverlay">  
  <div class="loader"></div>  
  <p>Submitting your details<br>Generating your offer‚Ä¶</p>  
</div>  
<body>  
  <div class="container">  
    <div class="logo">  
      <img src="assets/1000059103-removebg-preview.png" alt="The Mom's Kitchen Logo" />  
    </div>  
    <h2>Food Preferences Survey</h2>  <div class="progress-container">  
  <div class="progress-bar" id="progress-bar"></div>  
</div>  
<div class="progress-text" id="progress-text"></div>  

<form id="survey-form">  
  <!-- Step 1 -->  
  <div class="question active">  
    <label>Full Name</label>  
    <input type="text" name="name" required placeholder="Your name">  
    <label>Phone Number</label>  
    <input type="tel" name="phone" required placeholder="Your phone number">  
    <label>Building & Floor</label>  
    <input type="text" name="address" required placeholder="E.g., A-53, 2nd Floor, FIEE Complex">  
  </div>  

  <!-- Step 2 -->  
  <div class="question">  
    <label>Would you be interested in our Breakfast service?</label>  
    <div class="options">  
      <label><input type="radio" name="breakfast" value="Yes" required><span>Yes</span></label>  
      <label><input type="radio" name="breakfast" value="Maybe"><span>Maybe</span></label>  
      <label><input type="radio" name="breakfast" value="No"><span>No</span></label>  
    </div>  
  </div>  

  <!-- Step 3 -->  
  <div class="question">  
    <label>Would you be interested in our Lunch service?</label>  
    <div class="options">  
      <label><input type="radio" name="lunch" value="Yes" required><span>Yes</span></label>  
      <label><input type="radio" name="lunch" value="Maybe"><span>Maybe</span></label>  
      <label><input type="radio" name="lunch" value="No"><span>No</span></label>  
    </div>  
  </div>  

  <!-- Step 4 -->  
  <div class="question">  
    <label>How spicy do you like your food?</label>  
    <div class="options">  
      <label><input type="radio" name="spice" value="Mild" required><span>Mild & light</span></label>  
      <label><input type="radio" name="spice" value="Medium"><span>Medium</span></label>  
      <label><input type="radio" name="spice" value="Spicy"><span>Spicy üå∂</span></label>  
      <label><input type="radio" name="spice" value="Extra Hot"><span>Extra Hot üî•</span></label>  
    </div>  
  </div>  

  <!-- Step 5 -->  
  <div class="question">  
    <label>If we start a daily subscription, which plan would you like?</label>  
    <div class="options">  
      <label><input type="radio" name="subscription" value="Daily Meals" required><span>Daily Meals</span></label>  
      <label><input type="radio" name="subscription" value="3 Days a Week"><span>3 Days a Week</span></label>  
      <label><input type="radio" name="subscription" value="Weekly"><span>Weekly</span></label>  
      <label><input type="radio" name="subscription" value="Occasional"><span>Occasional</span></label>  
    </div>  
  </div>  

  <!-- Step 6 -->  
  <div class="question">  
    <label>Would you like to add anything?</label>  
    <div class="options">  
      <label><input type="radio" name="addons" value="Fresh Juices & Shakes" required><span>Fresh Juices & Shakes</span></label>  
      <label><input type="radio" name="addons" value="Evening Snacks"><span>Evening Snacks</span></label>  
      <label><input type="radio" name="addons" value="Sweets / Desserts"><span>Sweets / Desserts</span></label>  
      <label><input type="radio" name="addons" value="None"><span>None</span></label>  
    </div>  
  </div>  

  <!-- Step 7 -->  
  <div class="question">  
    <label>Any food item you‚Äôd love to have on our menu?</label>  
    <textarea name="food-item" rows="3" required placeholder="Please type your answer..."></textarea>  
  </div>  

  <div class="btn-group">  
    <button type="button" id="prevBtn" disabled>Previous</button>  
    <button type="button" id="nextBtn" disabled>Next</button>  
  </div>  
</form>

  </div>  <script>  
const questions = document.querySelectorAll(".question");  
const progressText = document.getElementById("progress-text");  
const progressBar = document.getElementById("progress-bar");  
const nextBtn = document.getElementById("nextBtn");  
const prevBtn = document.getElementById("prevBtn");  
const form = document.getElementById("survey-form");  
  
let currentStep = 0;  
  
/* ---------- PROGRESS ---------- */  
function updateProgress() {  
  const percent = ((currentStep + 1) / questions.length) * 100;  
  progressBar.style.width = percent + "%";  
  progressText.innerText = `Question ${currentStep + 1} of ${questions.length}`;  
  nextBtn.innerText = currentStep === questions.length - 1 ? "Submit" : "Next";  
  prevBtn.disabled = currentStep === 0;  
}  
  
/* ---------- VALIDATION ---------- */  
function validateStep() {  
  const current = questions[currentStep];  
  const requiredInputs = current.querySelectorAll("[required]");  
  let valid = false;  
  
  requiredInputs.forEach(input => {  
    if (  
      (input.type === "radio" &&  
        current.querySelector(`input[name="${input.name}"]:checked`)) ||  
      (input.type !== "radio" && input.value.trim() !== "")  
    ) {  
      valid = true;  
    }  
  });  
  
  nextBtn.disabled = !valid;  
}  
  
/* ---------- INIT ---------- */  
updateProgress();  
validateStep();  
form.addEventListener("input", validateStep);  
  
/* ---------- NEXT ---------- */  
nextBtn.addEventListener("click", () => {  
  if (currentStep < questions.length - 1) {  
    questions[currentStep].classList.remove("active");  
    currentStep++;  
    questions[currentStep].classList.add("active");  
    updateProgress();  
    validateStep();  
  } else {  
    form.dispatchEvent(new Event("submit", { cancelable: true }));  
  }  
});  
  
/* ---------- PREV ---------- */  
prevBtn.addEventListener("click", () => {  
  if (currentStep > 0) {  
    questions[currentStep].classList.remove("active");  
    currentStep--;  
    questions[currentStep].classList.add("active");  
    updateProgress();  
    validateStep();  
  }  
});  
  
/* ---------- SUBMIT ---------- */  
form.addEventListener("submit", async (e) => {  
  e.preventDefault();  
  
  // SHOW LOADER  
  document.getElementById("loadingOverlay").style.display = "flex";  
  
  // DISABLE BUTTONS  
  nextBtn.disabled = true;  
  prevBtn.disabled = true;  
  
  const formData = new FormData(form);  
  
  try {  
    const response = await fetch(  
      "https://script.google.com/macros/s/AKfycbziUvgEOdbnzfJLfmlJ9YATV2i2VzGzdp0jfVSui7_vrAKiCZOLAlLN3Xxc1mktjU3H6w/exec",  
      {  
        method: "POST",  
        body: formData  
      }  
    );  
  
    const result = await response.json();  
  
    if (result.success && result.offerCode && result.offerCode !== "OFFER_CLOSED") {  
      localStorage.setItem("offerCode", result.offerCode);  
      localStorage.setItem("customerName", formData.get("name"));  
    } else {  
      localStorage.removeItem("offerCode");  
    }  
  
    window.location.href = "offer.html";  
  
  } catch (err) {  
    alert("Submission failed. Please try again.");  
    document.getElementById("loadingOverlay").style.display = "none";  
    nextBtn.disabled = false;  
    prevBtn.disabled = false;  
    console.error(err);  
  }  
});  
</script>  
</body>  
</html> 

